@if (spinner===true) {
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
}
<mat-card>
    <div class="row">
    <button matTooltip="agrega medicamentos prescritos" [disabled]="this.profileForm.controls.history.status==='DISABLED'" mat-fab (click)="addText()" color="primary">
        <span class="material-symbols-outlined">
            prescriptions
            </span>
    </button>
        <button matTooltip="Usa la IA para mejorar tu historia" [disabled]="this.profileForm.controls.history.status==='DISABLED'" mat-fab (click)="consultAi()" color="primary">
            <span class="material-symbols-outlined">
                network_intelligence_update
                </span>
        </button>
    </div>    
    <form [formGroup]="profileForm" (ngSubmit)="saveDialog()">
        <mat-card-content>
            <div class="column">
                <mat-form-field style="width: 200px;">
                    <mat-label>Seleccione fecha</mat-label>
                    <input matInput [disabled]="true" [matDatepicker]="picker" formControlName="date">
                    <mat-hint>DD/MM/AAAA</mat-hint>
                    <mat-datepicker-toggle [disabled]="true" matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker [disabled]="true" #picker></mat-datepicker>
                </mat-form-field>
                <mat-form-field  [style.fontSize]="'20px'">
                    <mat-label>Historia</mat-label>
                    <textarea rows="10" matInput formControlName="history"></textarea>
                </mat-form-field>
          </div>
        </mat-card-content>
        <mat-card-actions>
            <button mat-button type="button" (click)="closeDialog()">Cancelar</button>
            <button mat-button type="submit" [disabled]="!profileForm.valid">Cambiar</button>
        </mat-card-actions>
    </form>
</mat-card>
